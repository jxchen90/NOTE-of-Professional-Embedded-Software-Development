# 第一章 处理器的基本概念

##寄存器
处理器（CPU）通过寄存器来运行程序和加工数据。分为通用寄存器和浮点寄存器。

1. 通用寄存器(General Purpose Register, GPR)
    * 程序计数器(PC)/指令指针(IP)
    * 栈指针寄存器(SP)
    * 其他一些寄存器，用于变量处理、参数传递等
2. 浮点寄存器(Floating Point Register, FPR)

##处理器是如何启动的
处理器在出厂时候已经固化好内部的寄存器的默认值，这些值决定了处理器上电时刻的行为。其中PC的默认值决定了处理器从哪一个具体的地址去获得第一条需要执行的指令

##输入和输出
CPU与外设的通信被简称为输入和输出(I/O),外设也像存储单元那样通过地址进行划分，它们的地址成为I/O PORT。

* I/O空间独立于内存所在的空间，不能直接用C语言中的指针完成读取，需要相应的函数（封装了I/O PORT的操作指令）
* I/O空间与内存空间在同一个地址空间---内存映射I/O空间

##中断
处理中断状态的栈有两种：

1. 没有独立的栈，直接将需要保存的信息放入当前运行程序的栈上
2. 为中断状态提供特定的栈，当中断发生时候，有一段代码被执行将栈切换到这一特定的栈

中断的分类：

硬中断：与外设相关
软中断/陷阱：通过执行处理器的指令触发

##字节序

* 小端模式(little endian)：低位字节放在低地址
* 大端模式(big endian)：高位字节放在低地址

下面两个图表示的例子告诉我们，由于处理器存在两种字节序模式，所以为了避免所编写的程序存在移植性的问题，在软件开发过程中指针应当严格按照所需的类型进行传递

小端模式结果正确：
![](https://i.imgur.com/eJLUTwE.png)

大端模式结果错误：
![](https://i.imgur.com/yhmPE6x.png)

##边界对齐


